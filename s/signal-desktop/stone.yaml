#
# SPDX-FileCopyrightText: Â© 2025- AerynOS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : signal-desktop
version     : 7.83.0
release     : 1
homepage    : https://signal.org
upstreams   :
    - https://updates.signal.org/desktop/apt/pool/s/signal-desktop/signal-desktop_7.83.0_amd64.deb : 
        hash: 5d7021d466be03af5fba597ac5b6c0e5d66f1e45ed2de3de979ca061661c57c2
        rename: signal.deb
summary     : UPDATE SUMMARY
description : |
    UPDATE DESCRIPTION
license     : UPDATE LICENSE
builddeps  :
    - binary(bsdtar-static)
    - binary(tar)
    - pkgconfig(alsa)
    - pkgconfig(cups)
    - pkgconfig(gbm)
    #- pkgconfig(gtk+-2.0)
    - pkgconfig(gtk+-3.0)
    - pkgconfig(libdrm)
    - pkgconfig(libpulse)
    - pkgconfig(xscrnsaver)
debug       : false
strip       : false
setup      : |
    ar xf %(sourcedir)/signal.deb
    bsdtar-static xf data.tar.*
install     : |
    _signal_root=%(libdir)/signal
    _signal_install=%(installroot)/$_signal_root

    %install_dir $_signal_install
    cp -R opt/Signal/* $_signal_install

    %install_bin $_signal_install/signal-desktop

    # Desktop file, icon
    %install_file %(pkgdir)/signal-desktop.desktop %(installroot)/%(datadir)/applications/signal-desktop.desktop
    
    for i in 32 64 128 256 512; do
        %install_file usr/share/icons/hicolor/${i}x${i}/apps/signal-desktop.png %(installroot)%(datadir)/icons/hicolor/${i}x${i}/apps/signal-desktop.png
    done
