#
# SPDX-FileCopyrightText: Â© 2025- AerynOS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : signal-desktop
version     : 7.83.0
release     : 1
homepage    : https://signal.org
upstreams   :
    - https://updates.signal.org/desktop/apt/pool/s/signal-desktop/signal-desktop_7.83.0_amd64.deb : 
        hash: 5d7021d466be03af5fba597ac5b6c0e5d66f1e45ed2de3de979ca061661c57c2
        rename: signal.deb
summary     : UPDATE SUMMARY
description : |
    UPDATE DESCRIPTION
license     : UPDATE LICENSE
builddeps  :
    - binary(bsdtar-static)
    - binary(tar)
    - pkgconfig(alsa)
    - pkgconfig(cups)
    - pkgconfig(gbm)
    #- pkgconfig(gtk+-2.0)
    - pkgconfig(gtk+-3.0)
    - pkgconfig(libdrm)
    - pkgconfig(libpulse)
    - pkgconfig(xscrnsaver)
debug       : false
strip       : false
setup      : |
    ar xf %(sourcedir)/signal.deb
    bsdtar-static xf data.tar.*
install     : |
    _signal_root=%(libdir)/signal
    _signal_install=%(installroot)/$_signal_root

    %install_dir $_signal_install
    cp -R opt/Signal/* $_signal_install

    # # Wrapper binary and script to disable the update check
    # %install_exe %(pkgdir)/discord.sh.in %(installroot)/%(bindir)/discord
    # sed -i "s|@@DISCORD_ROOT@@|$_discord_root|g" %(installroot)/%(bindir)/discord
    # %install_exe %(pkgdir)/disable-breaking-updates.py -t $_discord_install/

    # # Desktop file, icon
    # %install_file %(pkgdir)/discord.desktop %(installroot)/%(datadir)/applications/discord.desktop
    # rm -v $_discord_install/discord.desktop
    # %install_dir %(installroot)/%(datadir)/icons/hicolor/256x256/apps
    # ln -srv $_discord_install/discord.png %(installroot)/%(datadir)/icons/hicolor/256x256/apps/discord.png

    # # Useless to us
    # rm -v $_discord_install/postinst.sh
